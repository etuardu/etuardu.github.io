<!DOCTYPE html>
<html lang="en" class="no-js"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="alternate" type="application/rss+xml" title="" href="https://etuardu.github.io/feed.xml"><link rel="icon" href="/images/favicon.png" type="image/png"><title>Librokapto: a simple book catalogation app - etuardu</title><link rel="canonical" href="https://etuardu.github.io/posts/librokapto-a-simple-book-catalogation-app/"><meta property="og:site_name" content="etuardu"><meta property="og:title" content="Librokapto: a simple book catalogation app - etuardu"><meta property="og:type" content="website"><meta property="og:url" content="https://etuardu.github.io/posts/librokapto-a-simple-book-catalogation-app/"><meta name="twitter:creator" content="@etuardu"><script>document.documentElement.classList.remove('no-js');</script><style>*{box-sizing:border-box}:after,:before{box-sizing:inherit}body,dd,dl,dt,figcaption,figure,h1,h2,h3,h4,li,ol,p,ul{margin:0;padding:0}body{-ms-overflow-style:-ms-autohiding-scrollbar;scroll-behavior:smooth;font-size:1rem;min-height:100vh}ol[class],ul[class]{list-style:none}a:not([class]){text-decoration:underline;text-decoration-skip-ink:auto;cursor:pointer}input::-webkit-input-placeholder,select::-webkit-input-placeholder,textarea::-webkit-input-placeholder{line-height:normal}img{max-width:100%}@media(prefers-reduced-motion:reduce){*{-webkit-animation:none!important;animation:none!important;transition:none!important;scroll-behavior:auto!important}}.sf-flow{--flow-space:1em}.sf-flow>*+*{margin-top:1em;margin-top:var(--flow-space)}.align-start{align-items:flex-start}.align-center{align-items:center}.align-end{align-items:flex-end}.bg-primary{background:#173854}.bg-primary-shade{background:#102538}.bg-primary-glare{background:#22547c}.bg-highlight{background:#fedb8b}.bg-light{background:#fff}.bg-mid{background:#ccc}.bg-dark{background:#333}.bg-slate{background:#404040}.color-primary{color:#173854}.color-primary-shade{color:#102538}.color-primary-glare{color:#22547c}.color-highlight{color:#fedb8b}.color-light{color:#fff}.color-mid{color:#ccc}.color-dark{color:#333}.color-slate{color:#404040}.box-block{display:block}.box-flex{display:flex}.box-inline-flex{display:inline-flex}.box-hide{display:none}.font-base{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}.font-serif{font-family:Lora,serif}.gap-top-300{margin-top:.8rem}.gap-top-500{margin-top:1.25rem}.gap-top-600{margin-top:1.56rem}.gap-top-700{margin-top:1.95rem}.gap-top-800{margin-top:2.44rem}.gap-top-900{margin-top:3.05rem}.gap-top-base{margin-top:1rem}.gap-top-max{margin-top:4rem}.gap-bottom-300{margin-bottom:.8rem}.gap-bottom-500{margin-bottom:1.25rem}.gap-bottom-600{margin-bottom:1.56rem}.gap-bottom-700{margin-bottom:1.95rem}.gap-bottom-800{margin-bottom:2.44rem}.gap-bottom-900{margin-bottom:3.05rem}.gap-bottom-base{margin-bottom:1rem}.gap-bottom-max{margin-bottom:4rem}.leading-tight{line-height:1.2}.leading-mid{line-height:1.5}.leading-loose{line-height:1.7}.measure-long{max-width:75ch}.measure-short{max-width:60ch}.measure-compact{max-width:40ch}.pad-top-300{padding-top:.8rem}.pad-top-500{padding-top:1.25rem}.pad-top-600{padding-top:1.56rem}.pad-top-700{padding-top:1.95rem}.pad-top-800{padding-top:2.44rem}.pad-top-900{padding-top:3.05rem}.pad-top-base{padding-top:1rem}.pad-top-max{padding-top:4rem}.pad-bottom-300{padding-bottom:.8rem}.pad-bottom-500{padding-bottom:1.25rem}.pad-bottom-600{padding-bottom:1.56rem}.pad-bottom-700{padding-bottom:1.95rem}.pad-bottom-800{padding-bottom:2.44rem}.pad-bottom-900{padding-bottom:3.05rem}.pad-bottom-base{padding-bottom:1rem}.pad-bottom-max{padding-bottom:4rem}.pad-left-300{padding-left:.8rem}.pad-left-500{padding-left:1.25rem}.pad-left-600{padding-left:1.56rem}.pad-left-700{padding-left:1.95rem}.pad-left-800{padding-left:2.44rem}.pad-left-900{padding-left:3.05rem}.pad-left-base{padding-left:1rem}.pad-left-max{padding-left:4rem}.space-between{justify-content:space-between}.space-around{justify-content:space-around}.space-before{justify-content:flex-end}.stack-300{z-index:0}.stack-400{z-index:10}.stack-500{z-index:20}.stack-600{z-index:30}.stack-700{z-index:40}.ta-right{text-align:right}.ta-left{text-align:left}.ta-center{text-align:center}.text-300{font-size:.8rem}.text-500{font-size:1.25rem}.text-600{font-size:1.56rem}.text-700{font-size:1.95rem}.text-800{font-size:2.44rem}.text-900{font-size:3.05rem}.text-base{font-size:1rem}.text-max{font-size:4rem}.weight-light{font-weight:300}.weight-regular{font-weight:400}.weight-mid{font-weight:600}.weight-bold{font-weight:700}.width-full{width:100%}.width-half{width:50%}.width-quarter{width:25%}.width-third{width:33.3333333333%}@media screen and (min-width:48rem){.md\:align-start{align-items:flex-start}.md\:align-center{align-items:center}.md\:align-end{align-items:flex-end}.md\:box-block{display:block}.md\:box-flex{display:flex}.md\:box-inline-flex{display:inline-flex}.md\:box-hide{display:none}.md\:space-between{justify-content:space-between}.md\:space-around{justify-content:space-around}.md\:space-before{justify-content:flex-end}.md\:ta-right{text-align:right}.md\:ta-left{text-align:left}.md\:ta-center{text-align:center}.md\:text-300{font-size:.8rem}.md\:text-500{font-size:1.25rem}.md\:text-600{font-size:1.56rem}.md\:text-700{font-size:1.95rem}.md\:text-800{font-size:2.44rem}.md\:text-900{font-size:3.05rem}.md\:text-base{font-size:1rem}.md\:text-max{font-size:4rem}.md\:width-full{width:100%}.md\:width-half{width:50%}.md\:width-quarter{width:25%}.md\:width-third{width:33.3333333333%}}:root{--color-primary:#173854;--color-primary-shade:#102538;--color-primary-glare:#22547c;--color-highlight:#fedb8b;--color-light:#ffffff;--color-mid:#cccccc;--color-dark:#333333;--color-slate:#404040;--color-mode:"light";--color-bg:#ffffff;--color-bg-glare:#ffffff;--color-text:#333333;--color-text-glare:#333333;--color-selection-text:#ffffff;--color-selection-bg:#333333;--color-stroke:#cccccc;--color-action-bg:#173854;--color-action-text:#ffffff;--color-theme-primary:#173854;--color-theme-primary-glare:#22547c;--color-theme-highlight:#fedb8b;--color-theme-highlight-block:#fedb8b}@media(prefers-color-scheme:dark){:root{--color-mode:"dark"}:root:not([data-user-color-scheme]){--color-bg:#333333;--color-bg-glare:#404040;--color-text:#ffffff;--color-selection-text:#333333;--color-selection-bg:#ffffff;--color-stroke:#404040;--color-theme-primary:#8bb8df;--color-theme-primary-glare:#b3d2ea;--color-action-bg:var(--color-theme-primary-glare);--color-action-text:#333333;--color-theme-highlight:#fedb8b;--color-theme-highlight-block:#404040;--color-theme-feature-text:#fedb8b}}[data-user-color-scheme=dark]{--color-bg:#333333;--color-bg-glare:#404040;--color-text:#ffffff;--color-selection-text:#333333;--color-selection-bg:#ffffff;--color-stroke:#404040;--color-theme-primary:#8bb8df;--color-theme-primary-glare:#b3d2ea;--color-action-bg:var(--color-theme-primary-glare);--color-action-text:#333333;--color-theme-highlight:#fedb8b;--color-theme-highlight-block:#404040;--color-theme-feature-text:#fedb8b}body{color:var(--color-text);background-color:var(--color-bg)}main{overflow:hidden}::selection{color:var(--color-selection-text);background-color:var(--color-selection-bg)}@font-face{font-family:Lora;font-style:normal;font-weight:700;font-display:swap;src:local("Lora Bold"),local("Lora-Bold"),url(/fonts/lora-v13-latin-700.woff) format("woff")}body{line-height:1.56;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}h1,h2,h3{font-family:Lora,serif}h1{font-size:1.95rem}h2{font-size:1.56rem}h3{font-size:1.25rem}@media(min-width:48rem){h1{font-size:3.05rem}h2{font-size:2.44rem}h3{font-size:1.95rem}}body,html{height:100%}body{scroll-behavior:smooth;display:flex;flex-direction:column}main{flex:1 0 auto}main:focus{outline:0}hr{display:block;height:1px;max-width:500px;background:var(--color-stroke);border:none;margin:3.05rem auto}img{height:auto}:focus{outline:1px solid var(--color-theme-primary-glare);outline-offset:.25rem}.inner-wrapper{max-width:52rem;margin-left:auto;margin-right:auto;padding-left:1.25rem;padding-right:1.25rem}.post__footer h2 a,.skip-link:not(:focus),.visually-hidden{border:0;clip:rect(0 0 0 0);height:auto;margin:0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.wrapper{max-width:58rem;margin-left:auto;margin-right:auto;padding-left:1.25rem;padding-right:1.25rem}.button{display:inline-block;border:none;background-color:var(--color-action-bg);color:var(--color-action-text);padding:.8rem 1rem;line-height:1;margin:0;text-decoration:none;cursor:pointer;-webkit-appearance:none;-moz-appearance:none}.button:focus,.button:hover{filter:brightness(1.2)}.button:focus:hover{outline:0}.button:focus:not(:hover){outline:1px solid var(--color-action-text);outline-offset:-4px}.button:active{transform:scale(.99)}form{max-width:35rem}form br{display:none}label{display:block;font-weight:600}input,select{line-height:1}input,select,textarea{background-color:#fff;font:inherit;border:1px solid var(--color-text);margin-top:.15rem;padding:.5rem 1rem;width:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}label input{margin:-.25rem .5rem 0 0;width:auto;vertical-align:middle}fieldset{border:0;margin:0;padding:0}legend{display:block;font-weight:700}.field-list{margin:0;padding:0;list-style:none}.field-list__field-group{margin-bottom:2rem;transition:transform 150ms}.field-list__field-group__description{display:block;margin-top:.3rem;font-size:.875rem;line-height:1.25}textarea+.field-list__field-group__description{margin-top:0}.field-list__field-group--confirm{font-weight:400}.field-list__field-group__list{list-style:none;margin:0}.field-list__field-group__list label{font-weight:400}.field-list__field-group__list .field-list__field-group__description{margin:0 0 0 1.35rem}.heading-permalink{color:var(--color-theme-primary-glare);font-size:.8em;margin-left:.3em;margin-top:.2em}@media(min-width:48rem){.heading-permalink{font-size:.6em;margin-top:.4em}}.intro{background:var(--color-theme-highlight-block)}.intro__summary{--flow-space:1.25rem;font-size:1.25rem}.intro__summary a{color:currentColor}.intro__summary a:hover{text-decoration:none}.intro__heading{max-width:40ex;color:var(--color-theme-feature-text)}.intro__heading--compact{max-width:20ex}.nav__list{overflow-x:auto;padding:.5rem;margin:-.5rem;-webkit-overflow-scrolling:touch;-ms-overflow-style:none}.nav__list::-webkit-scrollbar{display:none}.nav__list>*+*{margin-left:1.25rem}.nav__item{padding:.8rem 0;flex-shrink:0}.nav__item a{color:currentColor;font-weight:600}.nav__item a:not(:hover){text-decoration:none}.pagination{flex-wrap:wrap}.pagination a{color:var(--color-theme-primary)}.pagination a:not(:hover){text-decoration:none}.pagination a[data-direction=backwards]{flex-direction:row-reverse}.pagination a[data-direction=backwards] svg{transform:rotate(-180deg)}.pagination a[data-direction=forwards]:only-child{margin-left:auto}.pagination svg{pointer-events:none}.post__body{--flow-space:2.44rem}.post__body h2+*,.post__body h3+*{--flow-space:1.25rem}.post__body h2,.post__body h3{position:relative;line-height:1.2}.post__body a:not([class]){color:var(--color-dark);position:relative;display:inline-block;background:var(--color-theme-highlight);padding:.2rem .4rem .3rem .4rem;text-decoration:none;word-break:break-word;line-height:1.2}.post__body a:not([class]):hover{text-decoration:underline}.post__body code{font-size:1.2em;color:var(--color-theme-primary);font-weight:600;margin-left:.01ch;margin-right:.01ch}.post__body pre>code{margin-right:0;border:1px solid rgba(255,255,255,.1);overflow-x:auto;-webkit-overflow-scrolling:touch}.post__body blockquote{border-left:.4rem solid var(--color-theme-primary-glare);margin-left:0;padding-left:1.25rem;font-style:italic;font-size:1.56rem}.post__body blockquote p{opacity:.85;padding:1.25rem 0}.post__body ol:not([class]),.post__body ul:not([class]){margin-left:2.44rem}.post__body ol:not([class]) li+li,.post__body ul:not([class]) li+li{margin-top:.8rem}.post__body .video-player,.post__body .video-player+*,.post__body figure,.post__body figure+*,.post__body pre>code,.post__body video{--flow-space:4rem}.post__body .video-player,.post__body figure,.post__body pre>code,.post__body video{width:100vw;max-width:58rem;margin-left:50%;transform:translateX(-50%);position:relative}.post__body .video-player,.post__body figure img,.post__body pre>code{box-shadow:0 10px 30px rgba(0,0,0,.15)}.post__body figure img{position:relative;z-index:1}.post__body figcaption{font-size:.8em;font-style:italic;max-width:52rem;margin:.5rem auto 0 auto;padding:0 1.25rem}.post__body pre>code{display:block;background:var(--color-dark);padding:1.95rem;font-size:1.25rem}.post__footer{background:var(--color-theme-highlight)}.post__footer h2{flex-shrink:0;margin-right:1rem;color:var(--color-dark)}.post__footer a{background:var(--color-bg);padding:.4rem .6rem}.post-list__item{--flow-space:1.95rem}.post-list__link,.post-list__link:visited{color:var(--color-theme-primary);text-decoration:none}.post-list__link:hover{text-decoration:underline}.site-head__site-name{font-weight:700;text-decoration:none;color:var(--color-text)}.site-foot{background:var(--color-bg-glare);color:var(--color-text);border-top:1px solid var(--color-stroke)}.site-foot a{color:currentColor}.site-foot a:hover{text-decoration:none}.site-foot__credit{text-align:center}.skip-link:focus{display:inline-block;position:absolute;top:0;left:0;padding:.8rem 1.25rem 1rem 1.25rem;background-color:var(--color-action-bg);color:var(--color-action-text);line-height:1;text-decoration:none;font-weight:700}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}.video-player{position:relative;padding-top:56.25%}.video-player>iframe{position:absolute;top:0;left:0;width:100%;height:100%}.post .video-player{padding-top:63%}@media(min-width:48rem){.post .video-player{padding-top:66%}}.round-photo{width:200px;height:200px;position:relative}.round-photo img{width:100%;border-radius:50%}.round-photo::after{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;display:block;content:"";box-shadow:inset -5px 5px 7px rgba(0,0,0,.2);pointer-events:none}</style></head><body><a class="skip-link" href="#main-content">Skip to content</a><header role="banner" class="[ site-head ] [ pad-top-700 pad-bottom-700"><div class="wrapper"><div class="[ site-head__inner ] [ md:box-flex space-between align-center ]"><a href="/" class="[ site-head__site-name ] [ leading-tight ]"><span class="visually-hidden">etuardu - Home</span> <span class="[ site-head__site-name ] [ text-600 ]" aria-hidden="true">etuardu</span></a><nav class="nav" aria-label="navigation"><ul class="[ nav__list ] [ box-flex align-center md:space-before ]"><li class="nav__item"><a href="/">Home</a></li><li class="nav__item"><a href="/about-me">About me</a></li></ul></nav></div></div></header><main id="main-content" tabindex="-1"><article class="[ post ] [ h-entry ]"><header class="[ intro ] [ pad-top-900 pad-bottom-max ]"><div class="[ inner-wrapper ] [ sf-flow ]"><h1 class="[ intro__heading ] [ text-800 md:text-900 leading-tight ] [ p-name ]">Librokapto: a simple book catalogation app</h1><div class="[ intro__summary ] [ sf-flow ] [ leading-mid measure-short ]"><p class="[ intro__meta ] [ text-500 leading-tight ]"><time datetime="2023-02-04T00:00:00.000Z" class="dt-published">4th February 2023</time> <span>— 8 minute read</span></p></div></div></header><div class="[ post__body ] [ inner-wrapper ] [ leading-loose pad-top-900 text-500 ] [ sf-flow ] [ e-content ]"><p><img src="/images/librokapto.png" alt="" loading="lazy" width="900" height="384"></p><blockquote>I used public APIs and Google Sheets for data storage to make this book catalogation web app that runs 100% on the client</blockquote><hr><p><a href="https://github.com/etuardu/librokapto">Librokapto</a> is an app I made for my own personal use, but I decided to share with anyone that might want to use it.</p><p>I needed an app to organize my books for easy access. After conducting some research, I wasn't satisfied with the available options, and began contemplating the idea of creating my own app.</p><p>My requirements were:</p><ul><li>simple two-coordinate addressing, e.g. <em>corridor bookcase, 3rd shelf</em>.</li><li>light and easy to use on mobile.</li><li>must be possible to acquire book information through ISBN scanning.</li><li>the book catalog must be accessible from any device with internet acces without installing additional software.</li></ul><p>In such a scenario, storing the book catalog in Google Sheets would drastically decrease the complexity of the project. The app would just serve as a helper to add books to the catalog through ISBN scanning and provide a nice book search view. The user would directly use Google Sheets for the rest of the CRUD operations as well as sharing the catalog.</p><h2 id="heading-getting-the-book-information">Getting the book information<a href="#heading-getting-the-book-information" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Decoding a barcode in the browser using the camera is quite straighforward using <a href="https://serratus.github.io/quaggaJS/">quaggaJS</a>, a JavaScript barcode-scanner that is able to decode a wide range of barcodes, including EAN13, the one used to encode books ISBN numbers and many other things.</p><p>Having a 13-digits ISBN code, it is possible to get book information using a public API by Google:</p><pre class="language-sh"><code class="language-sh"><span class="highlight-line">GET https://www.googleapis.com/books/v1/volumes?q<span class="token operator">=</span>isbn:9780008144227</span></code></pre><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">"kind"</span><span class="token operator">:</span> <span class="token string">"books#volumes"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"totalItems"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"volumeInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"The Alchemist"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"authors"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">          <span class="token string">"Paulo Coelho"</span></span><br><span class="highlight-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"publisher"</span><span class="token operator">:</span> <span class="token string">"HarperThorsons"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"imageLinks"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token property">"thumbnail"</span><span class="token operator">:</span> <span class="token string">"http://books.google.com/…"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          …</span></code></pre><p>This API allows cross-origin requests, so it's fine to consume it client side from any domain.</p><h2 id="heading-adding-a-book-to-the-data-store">Adding a book to the data store<a href="#heading-adding-a-book-to-the-data-store" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Adding a book is done by appending a new line to Google Sheets. There are several ways to interact programmatically with Google Sheets. I chose to implement the append function in Google Apps Script and to expose that as a web service <a href="https://developers.google.com/apps-script/guides/web#deploy_a_script_as_a_web_app">deploying the script as a web app</a>.</p><p>To handle POST requests, in my Google Apps Script I defined a <code>doPOST()</code> function. This is how an echo service would look like:</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>postData<span class="token punctuation">.</span>contents<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> ContentService<span class="token punctuation">.</span><span class="token function">createTextOutput</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token comment">// send the request back</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMimeType</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    ContentService<span class="token punctuation">.</span>MimeType<span class="token punctuation">.</span><span class="token constant">JSON</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Now sending POST requests to the deployment endpoint is possible to see the data getting echoed:</p><pre class="language-sh"><code class="language-sh"><span class="highlight-line">POST https://script.google.com/macros/s/…/exec</span><br><span class="highlight-line"><span class="token punctuation">{</span><span class="token string">"hello"</span><span class="token builtin class-name">:</span><span class="token string">"world"</span><span class="token punctuation">}</span></span></code></pre><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">"parameters"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"parameter"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"queryString"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"postData"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"contents"</span><span class="token operator">:</span> <span class="token string">"{\"hello\":\"world\"}"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"length"</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"postData"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text/plain"</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"contentLength"</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"contextPath"</span><span class="token operator">:</span> <span class="token string">""</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>In my <code>doPost()</code> function I parse the JSON in <code>e.postData.contents</code> to read the received book data and append it to the sheet.</p><h2 id="heading-retrieving-the-book-catalog">Retrieving the book catalog<a href="#heading-retrieving-the-book-catalog" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>To retrieve the whole catalog, I needed a way to get the content of a Google Sheet using JavaScript. While I could implement a <code>doGet()</code> function in the aforementioned Google Apps Script, I decided to retrieve the content of the sheet in another way, using the <a href="https://developers.google.com/chart/interactive/docs/querylanguage#setting-the-query-in-the-data-source-url">Google Visualization Query</a>. Its advantages are that it's not quota based, has a lower latency and does not require the implementation of a custom function.</p><p>It is possible to build the url for the query as such:</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// gsheet_url = 'https://docs.google.com/spreadsheets/d/…/edit#gid=0'</span></span><br><span class="highlight-line"><span class="token keyword">const</span> gviz_url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'gviz/tq'</span><span class="token punctuation">,</span> gsheet_url<span class="token punctuation">)</span></span><br><span class="highlight-line">gviz_url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'gid'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// sheet index</span></span><br><span class="highlight-line">gviz_url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'tq'</span><span class="token punctuation">,</span> <span class="token string">'SELECT A,B,C'</span><span class="token punctuation">)</span></span></code></pre><p>A GET request to that URL would result in a response such as:</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">/*O_o*/</span></span><br><span class="highlight-line">google<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>Query<span class="token punctuation">.</span><span class="token function">setResponse</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  …</span><br><span class="highlight-line">  <span class="token string-property property">"table"</span><span class="token operator">:</span><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string-property property">"cols"</span><span class="token operator">:</span><span class="token punctuation">[</span> … <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"rows"</span><span class="token operator">:</span><span class="token punctuation">[</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token string-property property">"c"</span><span class="token operator">:</span><span class="token punctuation">[</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token string-property property">"v"</span><span class="token operator">:</span><span class="token string">"first cell"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token string-property property">"v"</span><span class="token operator">:</span><span class="token string">"second cell"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token string-property property">"v"</span><span class="token operator">:</span><span class="token string">"third cell"</span><span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      …</span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Note that the response is not JSON but JavaScript code, since it is supposed to be used with the <a href="https://developers.google.com/chart/interactive/docs/basic_load_libs">Google Chart SDK</a>. Anyway, the argument of the <code>setResponse()</code> method is valid JSON and may be parsed without importing the Google Chart library, being aware that its structure may change in the future.</p><h2 id="heading-wrapping-up">Wrapping up<a href="#heading-wrapping-up" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Every API used in this project is CORS enabled. This allows the app to run entirely on the browser, sparing the need to build a backend and the round trip time that goes with that at each request.</p><p>The user settings such as the Google Sheets catalog URL are stored on the device using IndexedDB.</p><p>I spent some time designing the UI for the book insertion page, since I think it's crucial to have a good flow when scanning and saving a series of books. The final decision was to have a floating action button that toggles between "scan" and "save" depending on the book title field being filled or not. A progress bar is placed on the top of the form, and its background color reflects the one of the floating action button, so that the user can see what the current state is even when the onscreen keyboard overlaps the floating action button.</p><p>The result is a simple web app that just does its job giving a pleasant user experience.</p><p>Check out the <a href="https://github.com/etuardu/librokapto">Librokapto GitHub repository</a>.</p><p>You can see Librokapto in action here:</p><div class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/NDKk5wOUHcM?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><address rel="author" style="display:flex;align-items:center;font-style:unset"><div class="round-photo" style="width:60px;height:60px"><img src="/images/edoardo.jpeg" loading="lazy" width="436" height="436"></div><div class="nav__item" style="padding-left:1em"><a href="/about-me" class="color-slate text-base" style="opacity:.9">Edoardo Nannotti</a><p class="text-base" style="opacity:.7">Welcome! I'm Edoardo Nannotti, a software developer and designer based in Italy <i>[…]</i></p></div></address></div><aside class="[ post__body ] [ inner-wrapper ] [ pad-bottom-900 text-500 ]"></aside><ul class="[ nav__list ]" style="display:flex;justify-content:space-around;margin-bottom:40px"><li class="nav__item"><a href="/posts/retevent-a-virtual-conference-platform/">← Retevent, the event platform that shouldn't exist</a></li><li class="nav__item"><a href="/posts/cheating-in-a-drawing-game-using-python/">Cheating in a drawing game with Python →</a></li></ul><footer class="[ post__footer ] [ pad-top-500 pad-bottom-500 ]"><div class="inner-wrapper"><div class="[ nav ] [ box-flex align-center ]"><h2 class="font-base text-600 weight-mid" id="heading-filed-under">Filed under<a href="#heading-filed-under" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><ul class="[ nav__list ] [ box-flex align-center pad-left-400 ] [ p-category ]"><li class="nav__item"><a href="/tags/serverless">serverless</a></li><li class="nav__item"><a href="/tags/vue.js">vue.js</a></li></ul></div></div></footer></article></main><footer role="contentinfo" class="[ site-foot ] [ pad-top-700 pad-bottom-900 ]"><div class="wrapper"><div class="[ site-foot__inner ] [ md:box-flex space-between align-start ]"><div><article class="[ site-foot__details ] [ sf-flow measure-compact ]"><h2 class="font-base text-600">etuardu</h2><p>Personal blog of Edoardo Nannotti</p></article></div><div><nav class="nav" aria-label="footer navigation"><ul class="[ nav__list ] [ box-flex align-center md:space-before ]"><li class="nav__item"><a href="/">Home</a></li><li class="nav__item"><a href="/about-me">About me</a></li></ul></nav><theme-toggle></theme-toggle></div></div><p class="[ site-foot__credit ] [ pad-top-900 ]"><a href="https://creativecommons.org/licenses/by/4.0/" rel="external noreferer noopener" target="_blank">CC BY 4.0</a> Edoardo Nannotti. Powered <a href="https://www.11ty.dev/" rel="external noreferer noopener" target="_blank">11ty</a> and <a href="https://hylia.website" rel="external noopener noreferer" target="_blank">Hylia</a>.</p></div></footer><script type="module" src="/js/components/theme-toggle.js" async="" defer="defer"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js');
      });
    }</script><script src="https://identity.netlify.com/v1/netlify-identity-widget.js" defer="defer"></script></body></html>